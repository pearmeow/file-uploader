datasource db {
    url      = env("DATABASE_URL")
    provider = "postgresql"
}

generator client {
    provider = "prisma-client-js"
    output   = "../src/generated/prisma"
}

model User {
    id       Int    @id @default(autoincrement())
    username String @unique
    password String
    folder   Folder @relation(fields: [folderId], references: [id])
    folderId Int    @unique
}

model Folder {
    id           Int      @id @default(autoincrement())
    name         String
    user         User?
    userId       Int?
    parentId     Int?
    parentFolder Folder?  @relation("Subfolders", fields: [parentId], references: [id])
    subfolders   Folder[] @relation("Subfolders")
    files        File[]
}

model File {
    id       Int    @id @default(autoincrement())
    folder   Folder @relation(fields: [folderId], references: [id])
    folderId Int
    url      String
    name     String
    /// In kilobytes
    size     Float
}

model Session {
    id        String   @id
    sid       String   @unique
    data      String
    expiresAt DateTime
}
